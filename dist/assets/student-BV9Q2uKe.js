import{S,a as j,b}from"./index-laPszZKe.js";import{r as s,j as e,R as u,c as w}from"./vendor-f07bxsqa.js";const v=()=>{const r=localStorage.getItem("nlac_students");let t=r?JSON.parse(r):[];if(t.length===0){const n=[{id:1,studentIdNum:"2024-0001",name:"Garcia, Maria S.",program:"BSCS",pinCode:"4521",yearLevel:"1st Year",email:""},{id:2,studentIdNum:"2024-0002",name:"Wilson, James K.",program:"BSIT",pinCode:"7832",yearLevel:"2nd Year",email:""},{id:3,studentIdNum:"2024-0003",name:"Chen, Robert L.",program:"BS MATH",pinCode:"9012",yearLevel:"3rd Year",email:""}];localStorage.setItem("nlac_students",JSON.stringify(n)),t=n,console.log("Initialized localStorage with sample student data")}return t};function y(){const[r,t]=s.useState(!1),[n,o]=s.useState(!0),[m,a]=s.useState(null),[x,i]=s.useState(!0),[l,h]=s.useState(null);s.useEffect(()=>{const f=setTimeout(async()=>{try{v(),i(!1)}catch(c){console.error("Initialization error:",c),h(c.message),i(!1)}},200);return()=>clearTimeout(f)},[]);const g=d=>{a(d),t(!0),o(!1)},p=()=>{sessionStorage.removeItem("studentSession"),a(null),t(!1),o(!0)};return x?e.jsx("div",{className:"min-h-screen bg-[#0f172a] flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-6xl mb-4 animate-pulse",children:"ðŸ“š"}),e.jsx("div",{className:"text-white font-bold text-xl",children:"Loading..."}),e.jsx("div",{className:"text-slate-400 text-sm mt-2",children:"Initializing Student Portal"})]})}):l?e.jsx("div",{className:"min-h-screen bg-[#0f172a] flex items-center justify-center p-6",children:e.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 p-8 rounded-2xl max-w-md text-center",children:[e.jsx("div",{className:"text-red-500 text-5xl mb-4",children:"âš ï¸"}),e.jsx("h2",{className:"text-white font-black text-xl mb-2",children:"Error Loading Portal"}),e.jsx("p",{className:"text-red-400 mb-4",children:l}),e.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 hover:bg-red-500 text-white font-bold px-6 py-3 rounded-xl",children:"Refresh Page"})]})}):n&&!r?e.jsx(S,{onEnter:()=>o(!1),onBack:()=>window.location.href="./index.html"}):r?e.jsx(b,{student:m,onLogout:p}):e.jsx(j,{onLogin:g,onBack:()=>o(!0)})}window.initialUserType="student";window.initialShowWelcome="true";class N extends u.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Student Portal Error:",t,n)}render(){var t;return this.state.hasError?e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#0f172a",color:"white",flexDirection:"column",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"âš ï¸"}),e.jsx("h1",{style:{fontSize:"24px",marginBottom:"10px"},children:"Something went wrong"}),e.jsx("p",{style:{color:"#94a3b8",marginBottom:"20px"},children:((t=this.state.error)==null?void 0:t.message)||"Please refresh the page"}),e.jsx("button",{onClick:()=>window.location.reload(),style:{padding:"12px 24px",background:"#3b82f6",border:"none",borderRadius:"8px",color:"white",fontWeight:"bold",cursor:"pointer"},children:"Refresh Page"})]}):this.props.children}}const E=w.createRoot(document.getElementById("root"));E.render(e.jsx(u.StrictMode,{children:e.jsx(N,{children:e.jsx(y,{})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})});
